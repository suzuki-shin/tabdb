Optimisations

 - short ifs (`if x then y` instead of `if x;  y`)
 - short whens (`when x then y` instead of `when x;  y`)
